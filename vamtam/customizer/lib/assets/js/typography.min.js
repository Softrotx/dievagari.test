!function(t,e){"use strict";wp.customize.controlConstructor["vamtam-typography"]=wp.customize.Control.extend({ready:function(){var e,n=this,a=n.selector+" .font-family select",i=n.selector+" .variant select",o={};_.each(n.params.default,function(t,e){!1!==t&&(o[e]=t,void 0!==n.setting._value[e]&&(o[e]=n.setting._value[e]))}),_.each(n.setting._value,function(t,e){void 0!==o[e]&&void 0!==o[e]||(o[e]=t)});var s=function(e,n){var a=t(i),o=n||a.val();let s;a.empty();for(let n in VAMTAM_ALL_FONTS){const i=VAMTAM_ALL_FONTS[n];if(s=i,e===i.family){for(let e of i.weights){var l=t("<option>");l.text(e),a.append(l)}break}}s&&(s.weights.indexOf(o)>-1?a.val(o):a.val(s.weights.indexOf("normal")>-1?"normal":s.weights[0]))};t(a).val(n.setting._value["font-family"]),s(o["font-family"],o.variant),this.container.on("change",".font-family select",function(){o["font-family"]=jQuery(this).val(),n.saveValue(o),s(jQuery(this).val(),null)}),this.container.on("change",".variant select",function(){o.variant=jQuery(this).val(),n.saveValue(o)}),this.container.on("change keyup paste",".font-size input",function(){o["font-size"]=jQuery(this).val()+n.params.unit,n.saveValue(o)}),this.container.on("change keyup paste",".line-height input",function(){o["line-height"]=this.value,n.saveValue(o)}),this.container.on("change keyup paste",".letter-spacing input",function(){o["letter-spacing"]=this.value||"normal",n.saveValue(o)}),(e=this.container.find(".vamtam-color-picker")).wpColorPicker({change:function(){setTimeout(function(){o.color=e.val(),n.saveValue(o)},100)}})},saveValue:function(t){var e={};_.each(t,function(t,n){e[n]=t}),this.setting.set(e)}})}(jQuery);